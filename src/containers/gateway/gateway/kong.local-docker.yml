_format_version: "2.1"
_transform: true

services:
  - name: camel-adapter
    url: http://adapter:8080
    routes:
      - name: adapter
        paths:
          - /camel
        strip_path: false 
        methods:
        - GET
        - POST
        - PUT
        - DELETE
        - OPTIONS

  - name: vacatures-bemiddelaar
    url: http://vacatures-bemiddenlaar:8080
    routes:
      - name: vacatures-bemiddelaar
        paths:
          - /aanvraagvacature
        strip_path: false
    # plugins: &pluginconfig
    #   - name: oidc
    #     config:
    #       client_secret: umuUkXgfvCxROE1NoHggrZNgM5o9ROzT 
    #       client_id: poc-vng-backend
    #       bearer_only: 'yes'
    #       realm: poc-vng-realm
    #       introspection_endpoint: http://keycloak:8080/auth/realms/poc-vng-realm/protocol/openid-connect/token/introspect
    #       discovery: http://keycloak:8080/auth/realms/master/.well-known/openid-configuration

  - name: vacatures-bron
    url: http://vacatures-bron:8080
    routes:
      - name: vacatures-bron
        paths:
          - /vacature
        strip_path: false
    # plugins: *pluginconfig

  - name: werkzoekende-bemiddelaar
    url: http://werkzoekende-bemiddelaar:8080
    routes:
      - name: werkzoekende-bemiddelaar
        paths:
          - /aanvraagwerkzoekende
        strip_path: false
    # plugins: *pluginconfig
        
  - name: werkzoekende-bron
    url: http://werkzoekende-bron:8080
    routes:
      - name: backend-werkzoekende-bron
        paths:
          - /werkzoekende
        strip_path: false
    # plugins: *pluginconfig

plugins:
- name: cors
  config: 
    origins:
    - '*'
    headers:
    - Accept
    - Accept-Version
    - Content-Length
    - Content-MD5
    - Content-Type
    - Date
    - X-Auth-Token
    - Authorization
    methods:
    - GET
    - POST
    - PUT
    - DELETE
    - OPTIONS
    exposed_headers:
    - X-Auth-Token
    credentials: true
    max_age: 3600
    preflight_continue: true